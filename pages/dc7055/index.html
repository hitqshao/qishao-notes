<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LLM Attention | CPU &amp; GPU Microarch. Qi Shao</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="custom.css">
    <script language="javascript" type="text/javascript" src="/qishao-notes/js/pgmanor-self.js"></script>
    <meta name="description" content="Computer System">
    <meta name="google-site-verification" content="66w5U9NY5gJWu7iBtHKMbhpXkV94jy31L_RHbvrZZzY">
    <meta name="keywords" content="Hitqishao,golang,vue,go-web,go-admin,go-ldap-admin">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/qishao-notes/assets/css/0.styles.922e50b3.css" as="style"><link rel="preload" href="/qishao-notes/assets/js/app.1620f416.js" as="script"><link rel="preload" href="/qishao-notes/assets/js/2.9488d546.js" as="script"><link rel="preload" href="/qishao-notes/assets/js/92.abc5980f.js" as="script"><link rel="prefetch" href="/qishao-notes/assets/js/10.47e1485f.js"><link rel="prefetch" href="/qishao-notes/assets/js/100.8be4bc01.js"><link rel="prefetch" href="/qishao-notes/assets/js/101.6beccfeb.js"><link rel="prefetch" href="/qishao-notes/assets/js/102.8215070c.js"><link rel="prefetch" href="/qishao-notes/assets/js/103.f57a524b.js"><link rel="prefetch" href="/qishao-notes/assets/js/104.198d97fc.js"><link rel="prefetch" href="/qishao-notes/assets/js/105.91c10214.js"><link rel="prefetch" href="/qishao-notes/assets/js/106.715c42b8.js"><link rel="prefetch" href="/qishao-notes/assets/js/107.ceda742f.js"><link rel="prefetch" href="/qishao-notes/assets/js/108.0353072a.js"><link rel="prefetch" href="/qishao-notes/assets/js/109.28f81e4e.js"><link rel="prefetch" href="/qishao-notes/assets/js/11.475a6daa.js"><link rel="prefetch" href="/qishao-notes/assets/js/110.2d0b84b6.js"><link rel="prefetch" href="/qishao-notes/assets/js/12.0eb81a31.js"><link rel="prefetch" href="/qishao-notes/assets/js/13.dd887a3e.js"><link rel="prefetch" href="/qishao-notes/assets/js/14.398474f0.js"><link rel="prefetch" href="/qishao-notes/assets/js/15.7ebf031f.js"><link rel="prefetch" href="/qishao-notes/assets/js/16.95175d40.js"><link rel="prefetch" href="/qishao-notes/assets/js/17.80faad40.js"><link rel="prefetch" href="/qishao-notes/assets/js/18.74818b86.js"><link rel="prefetch" href="/qishao-notes/assets/js/19.01f04e6f.js"><link rel="prefetch" href="/qishao-notes/assets/js/20.76601c10.js"><link rel="prefetch" href="/qishao-notes/assets/js/21.0a7a876b.js"><link rel="prefetch" href="/qishao-notes/assets/js/22.5653cd65.js"><link rel="prefetch" href="/qishao-notes/assets/js/23.7d82567b.js"><link rel="prefetch" href="/qishao-notes/assets/js/24.f16d18ad.js"><link rel="prefetch" href="/qishao-notes/assets/js/25.c1f4fb62.js"><link rel="prefetch" href="/qishao-notes/assets/js/26.d98693f4.js"><link rel="prefetch" href="/qishao-notes/assets/js/27.efac147b.js"><link rel="prefetch" href="/qishao-notes/assets/js/28.c36d3ee8.js"><link rel="prefetch" href="/qishao-notes/assets/js/29.2894c23c.js"><link rel="prefetch" href="/qishao-notes/assets/js/3.56080097.js"><link rel="prefetch" href="/qishao-notes/assets/js/30.845402ca.js"><link rel="prefetch" href="/qishao-notes/assets/js/31.2a536d4f.js"><link rel="prefetch" href="/qishao-notes/assets/js/32.06343959.js"><link rel="prefetch" href="/qishao-notes/assets/js/33.f721dec8.js"><link rel="prefetch" href="/qishao-notes/assets/js/34.47e1577f.js"><link rel="prefetch" href="/qishao-notes/assets/js/35.82d60c42.js"><link rel="prefetch" href="/qishao-notes/assets/js/36.9ba0ca67.js"><link rel="prefetch" href="/qishao-notes/assets/js/37.0cc8968e.js"><link rel="prefetch" href="/qishao-notes/assets/js/38.fd3c55ba.js"><link rel="prefetch" href="/qishao-notes/assets/js/39.348c990d.js"><link rel="prefetch" href="/qishao-notes/assets/js/4.43d9d83d.js"><link rel="prefetch" href="/qishao-notes/assets/js/40.e38549c5.js"><link rel="prefetch" href="/qishao-notes/assets/js/41.bbe65f24.js"><link rel="prefetch" href="/qishao-notes/assets/js/42.b29b94b6.js"><link rel="prefetch" href="/qishao-notes/assets/js/43.a5610668.js"><link rel="prefetch" href="/qishao-notes/assets/js/44.9f340b2f.js"><link rel="prefetch" href="/qishao-notes/assets/js/45.34e8323d.js"><link rel="prefetch" href="/qishao-notes/assets/js/46.7657e973.js"><link rel="prefetch" href="/qishao-notes/assets/js/47.9090f72d.js"><link rel="prefetch" href="/qishao-notes/assets/js/48.0607530c.js"><link rel="prefetch" href="/qishao-notes/assets/js/49.d1fbb8ce.js"><link rel="prefetch" href="/qishao-notes/assets/js/5.048a44f6.js"><link rel="prefetch" href="/qishao-notes/assets/js/50.8bd1b68c.js"><link rel="prefetch" href="/qishao-notes/assets/js/51.8c78866f.js"><link rel="prefetch" href="/qishao-notes/assets/js/52.93caeab2.js"><link rel="prefetch" href="/qishao-notes/assets/js/53.87e3caca.js"><link rel="prefetch" href="/qishao-notes/assets/js/54.2934a37c.js"><link rel="prefetch" href="/qishao-notes/assets/js/55.dceb53a2.js"><link rel="prefetch" href="/qishao-notes/assets/js/56.58914c2d.js"><link rel="prefetch" href="/qishao-notes/assets/js/57.e17d8083.js"><link rel="prefetch" href="/qishao-notes/assets/js/58.ebe669f3.js"><link rel="prefetch" href="/qishao-notes/assets/js/59.e3c782e9.js"><link rel="prefetch" href="/qishao-notes/assets/js/6.a08b7615.js"><link rel="prefetch" href="/qishao-notes/assets/js/60.bfc85820.js"><link rel="prefetch" href="/qishao-notes/assets/js/61.4d8772e9.js"><link rel="prefetch" href="/qishao-notes/assets/js/62.5428035f.js"><link rel="prefetch" href="/qishao-notes/assets/js/63.b7b6a76d.js"><link rel="prefetch" href="/qishao-notes/assets/js/64.12616bc1.js"><link rel="prefetch" href="/qishao-notes/assets/js/65.4316ab04.js"><link rel="prefetch" href="/qishao-notes/assets/js/66.e85d7aee.js"><link rel="prefetch" href="/qishao-notes/assets/js/67.c820d15c.js"><link rel="prefetch" href="/qishao-notes/assets/js/68.97735d38.js"><link rel="prefetch" href="/qishao-notes/assets/js/69.99214227.js"><link rel="prefetch" href="/qishao-notes/assets/js/7.7dc4a3e5.js"><link rel="prefetch" href="/qishao-notes/assets/js/70.8ee80196.js"><link rel="prefetch" href="/qishao-notes/assets/js/71.8b6bddb6.js"><link rel="prefetch" href="/qishao-notes/assets/js/72.7a75537c.js"><link rel="prefetch" href="/qishao-notes/assets/js/73.b0a99f9f.js"><link rel="prefetch" href="/qishao-notes/assets/js/74.ade5b2af.js"><link rel="prefetch" href="/qishao-notes/assets/js/75.974fa3a3.js"><link rel="prefetch" href="/qishao-notes/assets/js/76.bb73f840.js"><link rel="prefetch" href="/qishao-notes/assets/js/77.8215ac1f.js"><link rel="prefetch" href="/qishao-notes/assets/js/78.e785c237.js"><link rel="prefetch" href="/qishao-notes/assets/js/79.b131f236.js"><link rel="prefetch" href="/qishao-notes/assets/js/8.c63a625d.js"><link rel="prefetch" href="/qishao-notes/assets/js/80.2cb14f3d.js"><link rel="prefetch" href="/qishao-notes/assets/js/81.34ad79b1.js"><link rel="prefetch" href="/qishao-notes/assets/js/82.a548a6fe.js"><link rel="prefetch" href="/qishao-notes/assets/js/83.36281e72.js"><link rel="prefetch" href="/qishao-notes/assets/js/84.722459cc.js"><link rel="prefetch" href="/qishao-notes/assets/js/85.cc8cdc89.js"><link rel="prefetch" href="/qishao-notes/assets/js/86.401f24f5.js"><link rel="prefetch" href="/qishao-notes/assets/js/87.2b7bb853.js"><link rel="prefetch" href="/qishao-notes/assets/js/88.9a9314f9.js"><link rel="prefetch" href="/qishao-notes/assets/js/89.bca9ccf1.js"><link rel="prefetch" href="/qishao-notes/assets/js/9.578bb46d.js"><link rel="prefetch" href="/qishao-notes/assets/js/90.51c23501.js"><link rel="prefetch" href="/qishao-notes/assets/js/91.d5123a9a.js"><link rel="prefetch" href="/qishao-notes/assets/js/93.145c78f2.js"><link rel="prefetch" href="/qishao-notes/assets/js/94.9396cdfd.js"><link rel="prefetch" href="/qishao-notes/assets/js/95.0d818798.js"><link rel="prefetch" href="/qishao-notes/assets/js/96.71ab2118.js"><link rel="prefetch" href="/qishao-notes/assets/js/97.cc08ee43.js"><link rel="prefetch" href="/qishao-notes/assets/js/98.d8e0cf6d.js"><link rel="prefetch" href="/qishao-notes/assets/js/99.1f5688bf.js">
    <link rel="stylesheet" href="/qishao-notes/assets/css/0.styles.922e50b3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qishao-notes/" class="home-link router-link-active"><!----> <span class="site-name">CPU &amp; GPU Microarch. Qi Shao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/qishao-notes/" class="nav-link">Home</a></div><div class="nav-item"><a href="/qishao-notes/gpu/" class="nav-link">gpu</a></div><div class="nav-item"><a href="/qishao-notes/cpu/" class="nav-link">cpu</a></div><div class="nav-item"><a href="/qishao-notes/llm/" class="nav-link">ml&amp;llm</a></div><div class="nav-item"><a href="/qishao-notes/compiler/" class="nav-link">compiler</a></div><div class="nav-item"><a href="/qishao-notes/hbm/" class="nav-link">hbm</a></div><div class="nav-item"><a href="/qishao-notes/mix/" class="nav-link">program</a></div><div class="nav-item"><a href="/qishao-notes/unix/" class="nav-link">unix</a></div><div class="nav-item"><a href="https://blog.csdn.net/hit_shaoqi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/hitqshao/qishao-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/qishao-notes/" class="nav-link">Home</a></div><div class="nav-item"><a href="/qishao-notes/gpu/" class="nav-link">gpu</a></div><div class="nav-item"><a href="/qishao-notes/cpu/" class="nav-link">cpu</a></div><div class="nav-item"><a href="/qishao-notes/llm/" class="nav-link">ml&amp;llm</a></div><div class="nav-item"><a href="/qishao-notes/compiler/" class="nav-link">compiler</a></div><div class="nav-item"><a href="/qishao-notes/hbm/" class="nav-link">hbm</a></div><div class="nav-item"><a href="/qishao-notes/mix/" class="nav-link">program</a></div><div class="nav-item"><a href="/qishao-notes/unix/" class="nav-link">unix</a></div><div class="nav-item"><a href="https://blog.csdn.net/hit_shaoqi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/hitqshao/qishao-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/qishao-notes/pages/dc7035/" class="sidebar-link">how LLM works</a></li><li><a href="/qishao-notes/pages/dc7036/" class="sidebar-link">LLM Hardware Optimization</a></li><li><a href="/qishao-notes/pages/dc7037/" class="sidebar-link">How to run llama.cpp with gem5</a></li><li><a href="/qishao-notes/pages/dc7038/" class="sidebar-link">Memory Usage in Training LLM</a></li><li><a href="/qishao-notes/pages/dc7039/" class="sidebar-link">LLM optimizations</a></li><li><a href="/qishao-notes/pages/dc7040/" class="sidebar-link">LLM flash algorthms</a></li><li><a href="/qishao-notes/pages/dc7041/" class="sidebar-link">LLM compute &amp; memory bound</a></li><li><a href="/qishao-notes/pages/dc7042/" class="sidebar-link">LLM Internals</a></li><li><a href="/qishao-notes/pages/dc7043/" class="sidebar-link">Efficient LLM</a></li><li><a href="/qishao-notes/pages/dc7045/" class="sidebar-link">Estimation of LLM</a></li><li><a href="/qishao-notes/pages/dc7046/" class="sidebar-link">Summery of Inner Workings of LLM</a></li><li><a href="/qishao-notes/pages/dc7047/" class="sidebar-link">List of LLM Optimization Techniques</a></li><li><a href="/qishao-notes/pages/dc7048/" class="sidebar-link">Memory Optimizations in LLM</a></li><li><a href="/qishao-notes/pages/dc7049/" class="sidebar-link">Reasoning in LLM</a></li><li><a href="/qishao-notes/pages/dc7050/" class="sidebar-link">LLM Quantization &amp; Outlier</a></li><li><a href="/qishao-notes/pages/dc7051/" class="sidebar-link">LLM Sparsity</a></li><li><a href="/qishao-notes/pages/dc7052/" class="sidebar-link">LLM Scaling Law</a></li><li><a href="/qishao-notes/pages/dc7055/" aria-current="page" class="active sidebar-link">LLM Attention</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/qishao-notes/pages/dc7055/#_2-1910-what-does-bert-look-at-an-analysis-of-bert-s-attention" class="sidebar-link">2.[1910] What Does BERT Look At? An Analysis of BERT’s Attention</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/dc7055/#main-contributions-of-the-paper" class="sidebar-link">Main Contributions of the Paper:</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/dc7055/#key-findings-2" class="sidebar-link">Key Findings:</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/dc7055/#strengths-of-the-study" class="sidebar-link">Strengths of the Study:</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/dc7055/#limitations-and-open-questions" class="sidebar-link">Limitations and Open Questions:</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/dc7055/#broader-implications" class="sidebar-link">Broader Implications:</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/dc7055/#conclusion-2" class="sidebar-link">Conclusion:</a></li></ul></li></ul></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/qishao-notes/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/qishao-notes/llm/#llm" data-v-06225672>llm</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/hitqshao" target="_blank" title="作者" class="beLink" data-v-06225672>hitqishao</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2025-02-05</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">LLM Attention<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>1.[742] A Multiscale Visualization of Attention in the Transformer Model
2.[1910] What Does BERT Look At? An Analysis of BERT’s Attention</p> <hr> <h3 id="_1-742-a-multiscale-visualization-of-attention-in-the-transformer-model"><a href="#_1-742-a-multiscale-visualization-of-attention-in-the-transformer-model" class="header-anchor">#</a> 1.[742] A Multiscale Visualization of Attention in the Transformer Model</h3> <p>The paper, &quot;A Multiscale Visualization of Attention in the Transformer Model&quot; by Jesse Vig, introduces an open-source tool designed to visualize attention mechanisms in Transformer-based models like BERT and GPT-2.<br>
The tool provides three distinct views: Attention-head view, Model view, and Neuron view, each offering a unique perspective on how attention operates at different scales within the model.<br>
The tool aims to make the multi-layer, multi-head attention mechanism more interpretable, helping researchers and practitioners understand how the model assigns weights to different input elements.</p> <h4 id="key-findings"><a href="#key-findings" class="header-anchor">#</a> Key Findings:</h4> <h5 id="attention-head-view"><a href="#attention-head-view" class="header-anchor">#</a> Attention-head View:</h5> <ul><li>Function: Visualizes attention patterns produced by one or more attention heads in a given layer.</li> <li>Key Insights:
<ul><li>Different heads learn unique attention mechanisms.
For example, some heads focus on <strong>positional patterns (e.g., attending to the previous word), while others capture lexical patterns (e.g., named entities, subject-verb pairs)</strong>.</li> <li>Attention heads can detect <strong>syntactic and semantic relations, such as dependency relations and part-of-speech tags</strong>.</li> <li>Use Case: Detecting model bias, such as gender bias in coreference resolution.
For instance, the model may associate &quot;She&quot; with &quot;nurse&quot; and &quot;He&quot; with &quot;doctor,&quot; indicating potential gender bias.</li></ul></li></ul> <p><img src="https://github.com/user-attachments/assets/fb797584-2b55-427b-8198-77b00f3de17e" alt="image"></p> <h5 id="model-view"><a href="#model-view" class="header-anchor">#</a> Model View:</h5> <ul><li>Function: Provides a high-level overview of attention across all layers and heads for a given input.</li> <li>Key Insights:
<ul><li>Attention patterns evolve across layers, with some heads focusing on within-sentence patterns and others on between-sentence patterns.</li> <li>The model view helps identify relevant heads for specific tasks, such as paraphrase detection, where heads that draw connections between sentences are particularly useful.</li> <li>Use Case: Locating relevant attention heads for tasks like paraphrase detection, where inter-sentence attention patterns are crucial.</li></ul></li></ul> <h5 id="neuron-view"><a href="#neuron-view" class="header-anchor">#</a> Neuron View:</h5> <ul><li>Function: Visualizes how individual neurons in the query and key vectors interact to produce attention.</li> <li>Key Insights:
<ul><li>The neuron view reveals how specific neurons contribute to attention patterns, such as distance-decaying attention (where attention decreases with distance from the source token).</li> <li>Certain neurons are responsible for specific attention behaviors, and modifying these neurons could control attention patterns (e.g., adjusting the decay rate for different text complexities).</li> <li>Use Case: Linking neurons to model behavior, allowing for potential interventions to control attention mechanisms.</li></ul></li></ul> <h4 id="additional-findings"><a href="#additional-findings" class="header-anchor">#</a> Additional Findings:</h4> <h5 id="attention-patterns"><a href="#attention-patterns" class="header-anchor">#</a> Attention Patterns:</h5> <p>Attention heads capture a wide range of behaviors, from coarse positional patterns to specific lexical and syntactic patterns.
Some heads are specialized for tasks like coreference resolution, while others focus on syntactic structures or semantic relationships.</p> <h5 id="model-bias"><a href="#model-bias" class="header-anchor">#</a> Model Bias:</h5> <p>The tool can help detect and analyze biases in the model, such as gender bias in coreference resolution, by visualizing attention patterns associated with biased predictions.</p> <h5 id="intervention-opportunities"><a href="#intervention-opportunities" class="header-anchor">#</a> Intervention Opportunities:</h5> <p>The neuron view provides insights into how specific neurons influence attention, offering opportunities for model intervention.<br>
For example, modifying neurons responsible for attention decay could adjust the context window size, which might be useful for generating texts of varying complexity.</p> <h4 id="future-work"><a href="#future-work" class="header-anchor">#</a> Future Work:</h4> <p>The authors plan to develop a unified interface for navigating all three views within the tool.<br>
They aim to expose other components of the model, such as value vectors and state activations.<br>
The tool could be extended to allow users to manipulate the model by modifying attention or editing individual neurons.</p> <h4 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion:</h4> <p>The paper presents a powerful visualization tool that enhances the interpretability of Transformer models by providing multiscale views of attention mechanisms.<br>
The tool not only helps in understanding how attention works in these models but also aids in detecting biases, locating relevant attention heads, and linking neurons to specific model behaviors.<br>
This work opens up new possibilities for model analysis and intervention, contributing to the broader goal of making complex neural models more transparent and controllable.</p> <hr> <h2 id="_2-1910-what-does-bert-look-at-an-analysis-of-bert-s-attention"><a href="#_2-1910-what-does-bert-look-at-an-analysis-of-bert-s-attention" class="header-anchor">#</a> 2.[1910] What Does BERT Look At? An Analysis of BERT’s Attention</h2> <p>The paper <em>&quot;What Does BERT Look At? An Analysis of BERT’s Attention&quot;</em> investigates how BERT, a transformer-based language model, distributes its attention across tokens in a sentence.<br>
By analyzing the patterns in BERT's multi-headed self-attention mechanism, the authors aim to better understand how the model processes linguistic information and captures meaning.</p> <h3 id="main-contributions-of-the-paper"><a href="#main-contributions-of-the-paper" class="header-anchor">#</a> <strong>Main Contributions of the Paper:</strong></h3> <ol><li><strong>Attention Visualization and Interpretation:</strong></li></ol> <ul><li>The paper analyzes the <strong>self-attention weights</strong>  in BERT to determine which tokens each attention head focuses on during different layers of the model.</li> <li>By visualizing these attention patterns, the authors reveal that BERT exhibits distinct and interpretable attention behaviors.</li></ul> <ol start="2"><li><strong>Head Specialization:</strong></li></ol> <ul><li>Different attention heads in BERT specialize in focusing on specific types of linguistic relationships, such as syntactic dependencies, sentence delimiters, or positional information.</li></ul> <ol start="3"><li><strong>Layer-wise Attention Patterns:</strong></li></ol> <ul><li>Early layers focus on <strong>local context</strong>  (e.g., neighboring tokens or adjacent words).</li> <li>Intermediate layers capture <strong>syntactic and semantic dependencies</strong>  (e.g., subject-verb or noun-adjective relations).</li> <li>Higher layers focus on <strong>sentence-level context</strong>  and <strong>global relationships</strong>  across the sentence.</li></ul> <ol start="4"><li><strong>Positional and Structural Awareness:</strong></li></ol> <ul><li>Some attention heads consistently attend to the [CLS] or [SEP] tokens, indicating a structural awareness of sentence boundaries.</li> <li>Other heads demonstrate a positional bias, focusing on tokens near the start or end of a sentence.</li></ul> <ol start="5"><li><strong>Impact on Downstream Tasks:</strong></li></ol> <ul><li>Attention heads responsible for syntactic and semantic relationships often contribute significantly to BERT's performance on tasks such as sentiment analysis or question answering.</li></ul> <h3 id="key-findings-2"><a href="#key-findings-2" class="header-anchor">#</a> <strong>Key Findings:</strong></h3> <h4 id="_1-attention-heads-exhibit-specific-roles"><a href="#_1-attention-heads-exhibit-specific-roles" class="header-anchor">#</a> <strong>1. Attention Heads Exhibit Specific Roles</strong></h4> <ul><li><strong>Structural Attention:</strong>
Some heads always attend to special tokens like [CLS], [SEP], or punctuation, reflecting their role in encoding sentence structure.</li> <li><strong>Syntactic Attention:</strong>
Other heads capture syntactic relationships, such as attending from verbs to their subjects or objects.</li> <li><strong>Positional Attention:</strong>
Certain heads focus on nearby tokens, revealing a preference for local context processing.</li></ul> <h4 id="_2-layer-wise-attention-evolution"><a href="#_2-layer-wise-attention-evolution" class="header-anchor">#</a> <strong>2. Layer-wise Attention Evolution</strong></h4> <ul><li><strong>Lower Layers:</strong>
Capture basic relationships, such as adjacency and local context (e.g., token-to-token relationships like “the” attending to “dog”).</li> <li><strong>Middle Layers:</strong>
Represent higher-order relationships, such as syntactic dependencies (e.g., nouns attending to their modifiers).</li> <li><strong>Higher Layers:</strong>
Aggregate global information, attending across the entire sentence or focusing on sentence-level semantics.</li></ul> <h4 id="_3-redundancy-in-attention-heads"><a href="#_3-redundancy-in-attention-heads" class="header-anchor">#</a> <strong>3. Redundancy in Attention Heads</strong></h4> <ul><li>Many attention heads in BERT have overlapping roles, suggesting some redundancy in the self-attention mechanism. This finding indicates that pruning or compressing BERT may be possible without significantly impacting performance.</li></ul> <h4 id="_4-task-specific-adaptation"><a href="#_4-task-specific-adaptation" class="header-anchor">#</a> <strong>4. Task-Specific Adaptation</strong></h4> <ul><li>When fine-tuned on specific tasks, BERT modifies its attention patterns to focus on task-relevant information. For example:
<ul><li>In sentiment analysis, attention heads may prioritize emotionally charged words.</li> <li>In question answering, attention shifts to keywords in the question and their corresponding answer spans.</li></ul></li></ul> <p><strong>Methods Used in the Paper:</strong></p> <h4 id="_1-attention-map-analysis"><a href="#_1-attention-map-analysis" class="header-anchor">#</a> 1. <strong>Attention Map Analysis:</strong></h4> <ul><li>The authors extract attention maps (matrices showing how much attention each token pays to every other token) for each layer and attention head in BERT.</li> <li>They visualize these maps to identify recurring patterns and correlations with linguistic features.</li></ul> <h4 id="_2-quantitative-metrics"><a href="#_2-quantitative-metrics" class="header-anchor">#</a> 2. <strong>Quantitative Metrics:</strong></h4> <ul><li>The authors introduce metrics to measure the distribution and concentration of attention weights, such as entropy (to measure how focused or dispersed attention is).</li></ul> <h4 id="_3-linguistic-correlations"><a href="#_3-linguistic-correlations" class="header-anchor">#</a> 3. <strong>Linguistic Correlations:</strong></h4> <ul><li>Attention patterns are compared with linguistic annotations (e.g., dependency parses) to identify heads that align with syntactic or semantic relationships.</li></ul> <h4 id="_4-head-ablation"><a href="#_4-head-ablation" class="header-anchor">#</a> 4. <strong>Head Ablation:</strong></h4> <ul><li>To assess the importance of individual attention heads, the authors perform ablation studies, where specific heads are disabled during inference, and the impact on task performance is measured.</li></ul> <p><img src="https://github.com/user-attachments/assets/973c45be-0592-48c5-a8f7-1bf6638e0fe2" alt="image"></p> <h3 id="strengths-of-the-study"><a href="#strengths-of-the-study" class="header-anchor">#</a> <strong>Strengths of the Study:</strong></h3> <ul><li><strong>Interpretability:</strong>
The paper provides an intuitive explanation of BERT’s inner workings, making the model more interpretable.</li> <li><strong>Insightful Visualization:</strong>
Attention maps reveal how BERT processes and prioritizes information across layers and heads.</li> <li><strong>Applications:</strong>
The findings are valuable for tasks like model pruning, compression, and explainability in NLP.</li></ul> <h3 id="limitations-and-open-questions"><a href="#limitations-and-open-questions" class="header-anchor">#</a> <strong>Limitations and Open Questions:</strong></h3> <ol><li><strong>Attention Does Not Equal Importance:</strong></li></ol> <ul><li>While attention maps show where the model focuses, they do not necessarily indicate the importance of specific tokens for predictions.</li></ul> <ol start="2"><li><strong>Redundancy Challenges:</strong></li></ol> <ul><li>While redundancy in attention heads is identified, the paper does not fully explore how to eliminate redundant heads without affecting model performance.</li></ul> <ol start="3"><li><strong>Bias in Attention Analysis:</strong></li></ol> <ul><li>The study assumes that attention weights provide a complete picture of how BERT processes information, which may not account for interactions across layers and non-attention mechanisms.</li></ul> <h3 id="broader-implications"><a href="#broader-implications" class="header-anchor">#</a> <strong>Broader Implications:</strong></h3> <ol><li><strong>Model Compression:</strong></li></ol> <ul><li>By identifying redundant heads, the paper opens avenues for reducing BERT’s computational complexity without sacrificing performance.</li></ul> <ol start="2"><li><strong>Explainable AI:</strong></li></ol> <ul><li>Understanding BERT’s attention patterns helps build trust and interpretability in NLP applications, particularly in sensitive domains like healthcare or legal systems.</li></ul> <ol start="3"><li><strong>Task-Specific Optimizations:</strong></li></ol> <ul><li>Insights into how BERT adapts attention for downstream tasks can inform better fine-tuning strategies.</li></ul> <h3 id="conclusion-2"><a href="#conclusion-2" class="header-anchor">#</a> <strong>Conclusion:</strong></h3> <p>The paper provides a detailed analysis of BERT's attention mechanism, revealing its interpretability, efficiency, and flexibility.<br>
By examining layer-wise and head-specific behaviors, the study sheds light on how BERT captures linguistic information and adapts to different tasks.<br>
This analysis serves as a stepping stone for optimizing and interpreting transformer-based models, paving the way for more efficient and explainable NLP systems.</p> <hr></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/hitqshao/qishao-notes/edit/main/docs/05.llm/18.llm_att.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/02/06, 02:40:48</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/qishao-notes/pages/dc7052/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">LLM Scaling Law</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/qishao-notes/pages/dc7052/" class="prev">LLM Scaling Law</a></span> <!----></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/hitqshao" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:hitqshao@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/hitqshao" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2025
    <span>Eryajf | <a href="https://github.com/hitqshao/qishao-notes/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/qishao-notes/assets/js/app.1620f416.js" defer></script><script src="/qishao-notes/assets/js/2.9488d546.js" defer></script><script src="/qishao-notes/assets/js/92.abc5980f.js" defer></script>
  </body>
</html>
