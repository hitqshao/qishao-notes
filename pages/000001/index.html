<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>llvm flow | CPU &amp; GPU Microarch. Qi Shao</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="custom.css">
    <script language="javascript" type="text/javascript" src="/qishao-notes/js/pgmanor-self.js"></script>
    <meta name="description" content="Computer System">
    <meta name="google-site-verification" content="66w5U9NY5gJWu7iBtHKMbhpXkV94jy31L_RHbvrZZzY">
    <meta name="keywords" content="Hitqishao,golang,vue,go-web,go-admin,go-ldap-admin">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/qishao-notes/assets/css/0.styles.922e50b3.css" as="style"><link rel="preload" href="/qishao-notes/assets/js/app.4534a12d.js" as="script"><link rel="preload" href="/qishao-notes/assets/js/2.75973713.js" as="script"><link rel="preload" href="/qishao-notes/assets/js/22.b2a5c895.js" as="script"><link rel="prefetch" href="/qishao-notes/assets/js/10.ff60f5f4.js"><link rel="prefetch" href="/qishao-notes/assets/js/11.35356818.js"><link rel="prefetch" href="/qishao-notes/assets/js/12.97db4364.js"><link rel="prefetch" href="/qishao-notes/assets/js/13.8c05a261.js"><link rel="prefetch" href="/qishao-notes/assets/js/14.a3fe5ba3.js"><link rel="prefetch" href="/qishao-notes/assets/js/15.74839805.js"><link rel="prefetch" href="/qishao-notes/assets/js/16.273c8e9e.js"><link rel="prefetch" href="/qishao-notes/assets/js/17.be625961.js"><link rel="prefetch" href="/qishao-notes/assets/js/18.c1ff1604.js"><link rel="prefetch" href="/qishao-notes/assets/js/19.aa8ac1ae.js"><link rel="prefetch" href="/qishao-notes/assets/js/20.fb3029b6.js"><link rel="prefetch" href="/qishao-notes/assets/js/21.c94fe2f0.js"><link rel="prefetch" href="/qishao-notes/assets/js/23.00322b09.js"><link rel="prefetch" href="/qishao-notes/assets/js/24.ae95a93e.js"><link rel="prefetch" href="/qishao-notes/assets/js/25.017bb7ac.js"><link rel="prefetch" href="/qishao-notes/assets/js/26.9a920fc3.js"><link rel="prefetch" href="/qishao-notes/assets/js/27.e8d36ebd.js"><link rel="prefetch" href="/qishao-notes/assets/js/28.e3478362.js"><link rel="prefetch" href="/qishao-notes/assets/js/29.2eae07d2.js"><link rel="prefetch" href="/qishao-notes/assets/js/3.702a9b19.js"><link rel="prefetch" href="/qishao-notes/assets/js/30.dbac792d.js"><link rel="prefetch" href="/qishao-notes/assets/js/31.887d10e5.js"><link rel="prefetch" href="/qishao-notes/assets/js/32.87750de9.js"><link rel="prefetch" href="/qishao-notes/assets/js/33.19f8db5c.js"><link rel="prefetch" href="/qishao-notes/assets/js/34.ffcf141e.js"><link rel="prefetch" href="/qishao-notes/assets/js/35.d949676c.js"><link rel="prefetch" href="/qishao-notes/assets/js/36.613f8a8d.js"><link rel="prefetch" href="/qishao-notes/assets/js/37.0ca4ede3.js"><link rel="prefetch" href="/qishao-notes/assets/js/38.aa57889a.js"><link rel="prefetch" href="/qishao-notes/assets/js/39.17867061.js"><link rel="prefetch" href="/qishao-notes/assets/js/4.424759af.js"><link rel="prefetch" href="/qishao-notes/assets/js/40.ba458f7a.js"><link rel="prefetch" href="/qishao-notes/assets/js/41.533a2027.js"><link rel="prefetch" href="/qishao-notes/assets/js/42.8e3ba435.js"><link rel="prefetch" href="/qishao-notes/assets/js/43.bae3965b.js"><link rel="prefetch" href="/qishao-notes/assets/js/44.5d199f6c.js"><link rel="prefetch" href="/qishao-notes/assets/js/45.9425ffca.js"><link rel="prefetch" href="/qishao-notes/assets/js/46.e32f3216.js"><link rel="prefetch" href="/qishao-notes/assets/js/47.fef1a5fe.js"><link rel="prefetch" href="/qishao-notes/assets/js/48.a8d78ba1.js"><link rel="prefetch" href="/qishao-notes/assets/js/49.2401593e.js"><link rel="prefetch" href="/qishao-notes/assets/js/5.1d4e5a23.js"><link rel="prefetch" href="/qishao-notes/assets/js/50.db0c1f9e.js"><link rel="prefetch" href="/qishao-notes/assets/js/51.e9c17d43.js"><link rel="prefetch" href="/qishao-notes/assets/js/52.6078ed93.js"><link rel="prefetch" href="/qishao-notes/assets/js/53.adae98eb.js"><link rel="prefetch" href="/qishao-notes/assets/js/54.033d140d.js"><link rel="prefetch" href="/qishao-notes/assets/js/55.d2a89ab6.js"><link rel="prefetch" href="/qishao-notes/assets/js/56.7c7c20de.js"><link rel="prefetch" href="/qishao-notes/assets/js/57.7d579775.js"><link rel="prefetch" href="/qishao-notes/assets/js/58.28b81516.js"><link rel="prefetch" href="/qishao-notes/assets/js/59.25b2ed1c.js"><link rel="prefetch" href="/qishao-notes/assets/js/6.938d7909.js"><link rel="prefetch" href="/qishao-notes/assets/js/60.8642e748.js"><link rel="prefetch" href="/qishao-notes/assets/js/61.afa37efa.js"><link rel="prefetch" href="/qishao-notes/assets/js/62.7a5c1b86.js"><link rel="prefetch" href="/qishao-notes/assets/js/63.7b70ff59.js"><link rel="prefetch" href="/qishao-notes/assets/js/64.cdeede88.js"><link rel="prefetch" href="/qishao-notes/assets/js/65.b9c997f7.js"><link rel="prefetch" href="/qishao-notes/assets/js/66.81e52233.js"><link rel="prefetch" href="/qishao-notes/assets/js/67.f9b7fab3.js"><link rel="prefetch" href="/qishao-notes/assets/js/68.23cfebc0.js"><link rel="prefetch" href="/qishao-notes/assets/js/69.64d1a4a9.js"><link rel="prefetch" href="/qishao-notes/assets/js/7.bd09a0eb.js"><link rel="prefetch" href="/qishao-notes/assets/js/70.d04b68f9.js"><link rel="prefetch" href="/qishao-notes/assets/js/71.172a9510.js"><link rel="prefetch" href="/qishao-notes/assets/js/72.ca4aa8e9.js"><link rel="prefetch" href="/qishao-notes/assets/js/73.5c7008ae.js"><link rel="prefetch" href="/qishao-notes/assets/js/74.dccfc934.js"><link rel="prefetch" href="/qishao-notes/assets/js/75.7e7c8aa4.js"><link rel="prefetch" href="/qishao-notes/assets/js/76.d67c1fef.js"><link rel="prefetch" href="/qishao-notes/assets/js/8.316deedd.js"><link rel="prefetch" href="/qishao-notes/assets/js/9.3863430d.js">
    <link rel="stylesheet" href="/qishao-notes/assets/css/0.styles.922e50b3.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qishao-notes/" class="home-link router-link-active"><!----> <span class="site-name">CPU &amp; GPU Microarch. Qi Shao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/qishao-notes/" class="nav-link">Home</a></div><div class="nav-item"><a href="/qishao-notes/hbm/" class="nav-link">hbm</a></div><div class="nav-item"><a href="/qishao-notes/compiler/" class="nav-link">compiler</a></div><div class="nav-item"><a href="/qishao-notes/gpu/" class="nav-link">gpu</a></div><div class="nav-item"><a href="/qishao-notes/cpu/" class="nav-link">cpu</a></div><div class="nav-item"><a href="/qishao-notes/llm/" class="nav-link">llm</a></div><div class="nav-item"><a href="/qishao-notes/unix/" class="nav-link">unix</a></div><div class="nav-item"><a href="/qishao-notes/message-board/" class="nav-link">BBS</a></div><div class="nav-item"><a href="https://blog.csdn.net/hit_shaoqi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/hitqshao/qishao-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/qishao-notes/" class="nav-link">Home</a></div><div class="nav-item"><a href="/qishao-notes/hbm/" class="nav-link">hbm</a></div><div class="nav-item"><a href="/qishao-notes/compiler/" class="nav-link">compiler</a></div><div class="nav-item"><a href="/qishao-notes/gpu/" class="nav-link">gpu</a></div><div class="nav-item"><a href="/qishao-notes/cpu/" class="nav-link">cpu</a></div><div class="nav-item"><a href="/qishao-notes/llm/" class="nav-link">llm</a></div><div class="nav-item"><a href="/qishao-notes/unix/" class="nav-link">unix</a></div><div class="nav-item"><a href="/qishao-notes/message-board/" class="nav-link">BBS</a></div><div class="nav-item"><a href="https://blog.csdn.net/hit_shaoqi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/hitqshao/qishao-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/qishao-notes/pages/000001/" aria-current="page" class="active sidebar-link">llvm flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/qishao-notes/pages/000001/#programing-language-dependent" class="sidebar-link">Programing Language Dependent</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_1-clang-parser-will-build-an-abstract-syntax-tree-ast" class="sidebar-link">1. Clang parser will build an Abstract Syntax Tree(AST)</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_2-clang-emit-llvm-ir" class="sidebar-link">2. Clang emit LLVM IR</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/qishao-notes/pages/000001/#ir-target-and-source-programing-language-independent" class="sidebar-link">IR Target and Source Programing Language Independent</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_3-llvm-target-independent-ir-optimization" class="sidebar-link">3. LLVM Target Independent IR Optimization</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/qishao-notes/pages/000001/#target-dependent-codegen" class="sidebar-link">Target Dependent Codegen</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_4-selectiondag-node" class="sidebar-link">4. SelectionDAG Node</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_5-to-emit-machine-instructions-llvm-will-legalize-the-operation" class="sidebar-link">5. To emit machine instructions, LLVM will legalize the operation</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_4-5" class="sidebar-link">4 &amp; 5</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_6-instruction-selection-from-sdnode-to-machinesdnode" class="sidebar-link">6. Instruction selection from SDNode to MachineSDNode</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_7-scheduling-and-emitting-a-machineinstr" class="sidebar-link">7. Scheduling and emitting a MachineInstr</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_8-register-allocation" class="sidebar-link">8. Register Allocation</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_9-from-machineinstruction-to-mcinst" class="sidebar-link">9. From MachineInstruction to MCinst</a></li><li class="sidebar-sub-header level3"><a href="/qishao-notes/pages/000001/#_10-build-llvm" class="sidebar-link">10. Build LLVM</a></li></ul></li></ul></li><li><a href="/qishao-notes/pages/000002/" class="sidebar-link">Getting Started with LLVM Core Libraries-Notes Chap5 IR</a></li><li><a href="/qishao-notes/pages/000003/" class="sidebar-link">Getting Started with LLVM Core Libraries-Notes Chap6 Backend</a></li><li><a href="/qishao-notes/pages/000004/" class="sidebar-link">Learning LLVM Notes 0</a></li><li><a href="/qishao-notes/pages/000005/" class="sidebar-link">Add New Instruction &quot;ACE&quot; to LLVM</a></li><li><a href="/qishao-notes/pages/000006/" class="sidebar-link">How does LLVM perform instruction combine</a></li><li><a href="/qishao-notes/pages/000007/" class="sidebar-link">Understand llvm with its source code Part 1</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/qishao-notes/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/qishao-notes/compiler/#compiler" data-v-06225672>compiler</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/hitqshao" target="_blank" title="作者" class="beLink" data-v-06225672>hitqishao</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-11-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">llvm flow<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>llvm front end demo
Notes from <strong>Life of an instruction in LLVM</strong>
https://blog.llvm.org/2012/11/life-of-instruction-in-llvm.html</p> <hr> <h2 id="programing-language-dependent"><a href="#programing-language-dependent" class="header-anchor">#</a> Programing Language Dependent</h2> <h3 id="_1-clang-parser-will-build-an-abstract-syntax-tree-ast"><a href="#_1-clang-parser-will-build-an-abstract-syntax-tree-ast" class="header-anchor">#</a> 1. Clang parser will build an Abstract Syntax Tree(AST)</h3> <h4 id="input"><a href="#input" class="header-anchor">#</a> Input</h4> <p>High-level source code (e.g., C, C++).</p> <h4 id="output"><a href="#output" class="header-anchor">#</a> Output</h4> <p>An AST, which is a tree structure representing the syntactic structure of the source code</p> <h4 id="tool"><a href="#tool" class="header-anchor">#</a> Tool</h4> <p>Clang Frontend</p> <h4 id="transformation"><a href="#transformation" class="header-anchor">#</a> Transformation</h4> <p>The compiler’s frontend (Clang in LLVM) parses the source code and constructs an AST.<br>
The AST captures the hierarchical structure of the program based on grammar rules (e.g., function definitions, statements, expressions).</p> <h4 id="reason"><a href="#reason" class="header-anchor">#</a> Reason</h4> <p>The AST is closely tied to the original source code and allows easy analysis and checking of syntactic correctness.<br>
It serves as a starting point for semantic analysis (e.g., type checking, variable scoping) before code generation.</p> <h4 id="key-source-file"><a href="#key-source-file" class="header-anchor">#</a> Key Source File</h4> <p>clang/lib/AST/</p> <h4 id="key-functions-classes"><a href="#key-functions-classes" class="header-anchor">#</a> Key Functions/Classes</h4> <h5 id="parseast"><a href="#parseast" class="header-anchor">#</a> ParseAST</h5> <p>The function responsible for initiating the parsing of source code to generate an Abstract Syntax Tree (AST).<br> <strong>Function</strong>: This function takes the parsed tokens from the lexer and generates the AST by applying grammar rules.<br>
It processes the input source code and organizes it into hierarchical structures like functions, expressions, and statements.</p> <h4 id="sema"><a href="#sema" class="header-anchor">#</a> Sema</h4> <p>The Sema class in Clang performs semantic analysis on the AST.<br> <strong>Function</strong>: After parsing the AST, Sema checks the semantic validity of the code, ensuring things like proper type usage, function declarations, and scope resolution.</p> <h3 id="_2-clang-emit-llvm-ir"><a href="#_2-clang-emit-llvm-ir" class="header-anchor">#</a> 2. Clang emit LLVM IR</h3> <h4 id="input-2"><a href="#input-2" class="header-anchor">#</a> Input</h4> <p>AST.</p> <h4 id="output-2"><a href="#output-2" class="header-anchor">#</a> Output</h4> <p>LLVM Intermediate Representation (IR).</p> <h4 id="tool-2"><a href="#tool-2" class="header-anchor">#</a> Tool</h4> <p>Clang’s Code Generation phase.</p> <h4 id="transformation-2"><a href="#transformation-2" class="header-anchor">#</a> Transformation</h4> <p>Once the AST is constructed, the compiler translates it into LLVM IR.<br>
LLVM IR is a low-level, typed, static single assignment (SSA) form that is independent of any specific machine architecture.<br>
It consists of a set of instructions operating on virtual registers, with each register assigned only once (SSA form).</p> <h4 id="reason-2"><a href="#reason-2" class="header-anchor">#</a> Reason</h4> <p>LLVM IR is a portable, intermediate code format that enables various machine-independent optimizations.
It is also the bridge between different frontends (e.g., Clang, Rust) and the backend that handles machine-specific code generation.</p> <h4 id="key-source-file-2"><a href="#key-source-file-2" class="header-anchor">#</a> Key Source File</h4> <p>clang/lib/CodeGen/</p> <h4 id="key-functions-classes-2"><a href="#key-functions-classes-2" class="header-anchor">#</a> Key Functions/Classes</h4> <h5 id="codegenfunction-this-class-is-responsible-for-generating-llvm-ir-from-the-ast"><a href="#codegenfunction-this-class-is-responsible-for-generating-llvm-ir-from-the-ast" class="header-anchor">#</a> CodeGenFunction: This class is responsible for generating LLVM IR from the AST.</h5> <p><strong>Function</strong>: It traverses the AST and generates the corresponding LLVM IR.<br>
For example, for a function definition in the AST, it creates an llvm::Function in the IR.</p> <h5 id="emitfunctionbody-this-method-inside-codegenfunction-emits-the-body-of-a-function-in-ir"><a href="#emitfunctionbody-this-method-inside-codegenfunction-emits-the-body-of-a-function-in-ir" class="header-anchor">#</a> EmitFunctionBody: This method inside CodeGenFunction emits the body of a function in IR.</h5> <p><strong>Function</strong>: It walks over statements and expressions within the function and emits LLVM IR instructions.</p> <h5 id="emitexpr-and-emitstmt-these-methods-handle-expressions-and-statements-within-the-ast-and-translate-them-into-llvm-ir"><a href="#emitexpr-and-emitstmt-these-methods-handle-expressions-and-statements-within-the-ast-and-translate-them-into-llvm-ir" class="header-anchor">#</a> EmitExpr and EmitStmt: These methods handle expressions and statements within the AST and translate them into LLVM IR.</h5> <p><strong>Function</strong>: EmitExpr generates LLVM IR for expressions (e.g., arithmetic operations, function calls), while EmitStmt generates IR for control-flow structures like if statements and loops.</p> <hr> <h2 id="ir-target-and-source-programing-language-independent"><a href="#ir-target-and-source-programing-language-independent" class="header-anchor">#</a> IR Target and Source Programing Language Independent</h2> <h3 id="_3-llvm-target-independent-ir-optimization"><a href="#_3-llvm-target-independent-ir-optimization" class="header-anchor">#</a> 3. LLVM Target Independent IR Optimization</h3> <h4 id="input-3"><a href="#input-3" class="header-anchor">#</a> Input</h4> <p>Unoptimized LLVM IR.</p> <h4 id="output-3"><a href="#output-3" class="header-anchor">#</a> Output</h4> <p>Optimized LLVM IR.</p> <h4 id="tool-3"><a href="#tool-3" class="header-anchor">#</a> Tool</h4> <p>LLVM Optimizer (opt).</p> <h4 id="transformation-3"><a href="#transformation-3" class="header-anchor">#</a> Transformation</h4> <p>LLVM applies a series of machine-independent optimizations to the IR, such as dead code elimination, constant propagation, inlining, and loop optimizations.<br>
These transformations operate on the SSA form of the IR to improve performance and reduce unnecessary instructions.</p> <h4 id="reason-3"><a href="#reason-3" class="header-anchor">#</a> Reason</h4> <p>Optimizing at the IR level allows for improvements that are independent of the target architecture, making the resulting code more efficient before it reaches machine-specific stages.</p> <h4 id="key-source-files"><a href="#key-source-files" class="header-anchor">#</a> Key Source Files</h4> <p>llvm/lib/Transforms/</p> <h4 id="key-functions-classes-3"><a href="#key-functions-classes-3" class="header-anchor">#</a> Key Functions/Classes:</h4> <h5 id="opt-the-opt-tool-runs-optimization-passes-on-the-llvm-ir"><a href="#opt-the-opt-tool-runs-optimization-passes-on-the-llvm-ir" class="header-anchor">#</a> opt The opt tool runs optimization passes on the LLVM IR.</h5> <p><strong>Function</strong>: opt applies a series of transformations to the IR to improve efficiency.<br>
These transformations include passes like dead code elimination (DeadCodeElimination.cpp), inlining (InlineFunction.cpp), and constant propagation (ConstantPropagation.cpp).</p> <h5 id="key-passes"><a href="#key-passes" class="header-anchor">#</a> Key Passes:</h5> <p><strong>DeadStoreElimination</strong>: Eliminates stores that are never used.
<strong>SCCP (Sparse Conditional Constant Propagation)</strong>: Optimizes based on constant values propagated through the program.
<strong>GVN (Global Value Numbering)</strong>: Removes redundant calculations.</p> <hr> <h2 id="target-dependent-codegen"><a href="#target-dependent-codegen" class="header-anchor">#</a> Target Dependent Codegen</h2> <h3 id="_4-selectiondag-node"><a href="#_4-selectiondag-node" class="header-anchor">#</a> 4. SelectionDAG Node<br></h3> <p>SelectionDAGBuild creates SDGNode<br>
SelectionDAGIsel goes over all IR instructions and calls <strong>SelectionDAGBuilder::visit</strong> to Dispatch them<br>
We can use -debug to llc or -view to get log or dump image of the graph<br></p> <h3 id="_5-to-emit-machine-instructions-llvm-will-legalize-the-operation"><a href="#_5-to-emit-machine-instructions-llvm-will-legalize-the-operation" class="header-anchor">#</a> 5. To emit machine instructions, LLVM will legalize the operation<br></h3> <p>Use target-specific hooks to convert all operations and types into ones that the target actually supports.
This is done by <strong>TargetLowering</strong>. <br>
SelectionDAGLegalize::LegalizeOp</p> <h3 id="_4-5"><a href="#_4-5" class="header-anchor">#</a> 4 &amp; 5</h3> <h4 id="input-4"><a href="#input-4" class="header-anchor">#</a> Input</h4> <p>Optimized LLVM IR.</p> <h4 id="output-4"><a href="#output-4" class="header-anchor">#</a> Output</h4> <p>SelectionDAG.</p> <h4 id="tool-4"><a href="#tool-4" class="header-anchor">#</a> Tool</h4> <p>LLVM CodeGen Phase.</p> <h4 id="transformation-4"><a href="#transformation-4" class="header-anchor">#</a> Transformation</h4> <p>In this phase, LLVM lowers the IR into a Selection Directed Acyclic Graph (SelectionDAG).<br>
The SelectionDAG represents the program in terms of target-independent operations (nodes) and data dependencies (edges).<br>
Each node in the DAG represents an operation, and the edges show data flow between these operations.</p> <h4 id="reason-4"><a href="#reason-4" class="header-anchor">#</a> Reason</h4> <p>The SelectionDAG abstracts machine-specific details while exposing data dependencies, allowing for architecture-specific instruction selection and scheduling in a clean, optimized manner.</p> <h4 id="key-source-file-3"><a href="#key-source-file-3" class="header-anchor">#</a> Key Source File</h4> <p>llvm/lib/CodeGen/SelectionDAG/</p> <h4 id="key-functions-classes-4"><a href="#key-functions-classes-4" class="header-anchor">#</a> Key Functions/Classes</h4> <h5 id="selectiondagbuilder-this-class-is-responsible-for-constructing-the-selectiondag-from-the-llvm-ir"><a href="#selectiondagbuilder-this-class-is-responsible-for-constructing-the-selectiondag-from-the-llvm-ir" class="header-anchor">#</a> SelectionDAGBuilder: This class is responsible for constructing the SelectionDAG from the LLVM IR.</h5> <p><strong>Function</strong>: It lowers the LLVM IR instructions into nodes in the SelectionDAG.<br>
Each node in the DAG represents an operation (e.g., addition, memory load) that can later be translated into machine instructions.</p> <h5 id="loweroperation-a-method-that-lowers-a-specific-llvm-ir-instruction-like-an-add-operation-to-a-corresponding-selectiondag-node"><a href="#loweroperation-a-method-that-lowers-a-specific-llvm-ir-instruction-like-an-add-operation-to-a-corresponding-selectiondag-node" class="header-anchor">#</a> LowerOperation: A method that lowers a specific LLVM IR instruction (like an add operation) to a corresponding SelectionDAG node.</h5> <p><strong>Function</strong>: This function breaks down LLVM IR into target-independent operations within the DAG.</p> <h5 id="legalizedag-ensures-that-the-dag-s-operations-conform-to-the-target-machine-s-constraints-e-g-valid-data-types-supported-instructions"><a href="#legalizedag-ensures-that-the-dag-s-operations-conform-to-the-target-machine-s-constraints-e-g-valid-data-types-supported-instructions" class="header-anchor">#</a> LegalizeDAG: Ensures that the DAG's operations conform to the target machine's constraints (e.g., valid data types, supported instructions).</h5> <p><strong>Function</strong>: Legalizes operations by splitting larger types into smaller ones or mapping operations to a series of simpler operations that the target can execute.</p> <h3 id="_6-instruction-selection-from-sdnode-to-machinesdnode"><a href="#_6-instruction-selection-from-sdnode-to-machinesdnode" class="header-anchor">#</a> 6. Instruction selection from SDNode to MachineSDNode<br></h3> <p>SelectionDAGISel::Select<br>
SelectCode<br>
This step will create MachineSDNode, a subclass of SDNode which holds the information required to construct an actual machine instruction, but still in DAG node form.</p> <h4 id="input-5"><a href="#input-5" class="header-anchor">#</a> Input</h4> <p>SelectionDAG.</p> <h4 id="output-5"><a href="#output-5" class="header-anchor">#</a> Output</h4> <p>MachineDAG (target-specific instructions).</p> <h4 id="tool-5"><a href="#tool-5" class="header-anchor">#</a> Tool</h4> <p>LLVM Target Lowering (Target-specific instruction selectors).</p> <h4 id="transformation-5"><a href="#transformation-5" class="header-anchor">#</a> Transformation</h4> <p>At this stage, the SelectionDAG is converted into a MachineDAG, where the target-independent nodes of the DAG are mapped to actual machine instructions (specific to the target architecture).<br>
This involves instruction selection, which translates abstract operations (like add, mul) into the corresponding machine instructions (e.g., x86 or ARM instructions).</p> <h4 id="reason-5"><a href="#reason-5" class="header-anchor">#</a> Reason</h4> <p>The MachineDAG is essential because it ties the program’s logic to a specific machine's instruction set.<br>
This allows for efficient use of architecture-specific features like registers, instruction pipelines, and specialized operations.</p> <h4 id="key-source-file-4"><a href="#key-source-file-4" class="header-anchor">#</a> Key Source File</h4> <p>llvm/lib/CodeGen/SelectionDAG/SelectionDAGISel.cpp</p> <h4 id="key-functions-classes-5"><a href="#key-functions-classes-5" class="header-anchor">#</a> Key Functions/Classes:</h4> <h5 id="selectiondagisel-the-core-class-responsible-for-instruction-selection"><a href="#selectiondagisel-the-core-class-responsible-for-instruction-selection" class="header-anchor">#</a> SelectionDAGISel: The core class responsible for instruction selection.</h5> <p><strong>Function</strong>: It converts the target-independent DAG into a target-specific MachineDAG.<br>
This involves mapping high-level operations like add to actual machine instructions for the target architecture.</p> <h5 id="selectcode-this-method-performs-pattern-matching-to-select-the-most-appropriate-machine-instruction-for-each-dag-node"><a href="#selectcode-this-method-performs-pattern-matching-to-select-the-most-appropriate-machine-instruction-for-each-dag-node" class="header-anchor">#</a> SelectCode: This method performs pattern matching to select the most appropriate machine instruction for each DAG node.</h5> <p><strong>Function</strong>: It uses target-specific information (provided in .td files) to match operations in the DAG to machine instructions.</p> <h3 id="_7-scheduling-and-emitting-a-machineinstr"><a href="#_7-scheduling-and-emitting-a-machineinstr" class="header-anchor">#</a> 7. Scheduling and emitting a MachineInstr<br></h3> <p>Translate SDNode into Machine Instructions with InstrEmitter::EmitMachineNode, emmit into MachineBasicBlock.
Here the instruction are in linear form (MI). No DAG any more.<br> <strong>-print-machineinstrs</strong><br>
Still SSA form.</p> <h4 id="input-6"><a href="#input-6" class="header-anchor">#</a> Input</h4> <p>MachineDAG.</p> <h4 id="output-6"><a href="#output-6" class="header-anchor">#</a> Output</h4> <p>A sequence of machine instructions (linear instruction stream).</p> <h4 id="tool-6"><a href="#tool-6" class="header-anchor">#</a> Tool</h4> <p>LLVM CodeGen Scheduler.</p> <h4 id="transformation-6"><a href="#transformation-6" class="header-anchor">#</a> Transformation</h4> <p>The MachineDAG undergoes instruction scheduling, where the instructions are ordered in a way that respects data dependencies while maximizing performance.<br>
This is necessary to avoid pipeline stalls, reduce instruction latency, and exploit instruction-level parallelism (ILP) in the target CPU.</p> <h4 id="reason-6"><a href="#reason-6" class="header-anchor">#</a> Reason</h4> <p>Modern CPUs can execute multiple instructions in parallel, so careful scheduling can significantly improve performance by maximizing resource utilization (e.g., CPU pipeline, functional units).</p> <h4 id="key-source-files-2"><a href="#key-source-files-2" class="header-anchor">#</a> Key Source Files</h4> <p>llvm/lib/CodeGen/ScheduleDAG/, llvm/lib/CodeGen/MachineScheduler.cpp</p> <h4 id="key-functions-classes-6"><a href="#key-functions-classes-6" class="header-anchor">#</a> Key Functions/Classes:</h4> <h5 id="scheduledaginstrs-this-class-represents-the-dag-used-for-scheduling-machine-instructions"><a href="#scheduledaginstrs-this-class-represents-the-dag-used-for-scheduling-machine-instructions" class="header-anchor">#</a> ScheduleDAGInstrs: This class represents the DAG used for scheduling machine instructions.</h5> <p><strong>Function</strong>: It is responsible for reordering the instructions within the MachineDAG to avoid pipeline stalls, minimize instruction latency, and make use of instruction-level parallelism.</p> <h5 id="schedulemachinebasicblock-this-method-schedules-the-instructions-in-a-machine-basic-block-based-on-data-dependencies-and-resource-constraints"><a href="#schedulemachinebasicblock-this-method-schedules-the-instructions-in-a-machine-basic-block-based-on-data-dependencies-and-resource-constraints" class="header-anchor">#</a> ScheduleMachineBasicBlock: This method schedules the instructions in a machine basic block based on data dependencies and resource constraints.</h5> <p><strong>Function</strong>: It takes the MachineDAG, considers the target architecture’s constraints, and reorders instructions for optimal performance.</p> <h3 id="_8-register-allocation"><a href="#_8-register-allocation" class="header-anchor">#</a> 8. Register Allocation<br></h3> <p>For instructions that can only support fixed registers, it is already allocated. Here the virtual registers are allocated into physical registers. This assignment is done by X86DAGToDAGISel::Select.<br>
After this, another round of optimization is conducted, TargetPassConfig::addMachinePasses.</p> <h4 id="input-7"><a href="#input-7" class="header-anchor">#</a> Input</h4> <p>Machine Instructions with virtual registers.</p> <h4 id="output-7"><a href="#output-7" class="header-anchor">#</a> Output</h4> <p>Machine instructions with physical registers.</p> <h4 id="tool-7"><a href="#tool-7" class="header-anchor">#</a> Tool</h4> <p>LLVM Register Allocator.</p> <h4 id="transformation-7"><a href="#transformation-7" class="header-anchor">#</a> Transformation</h4> <p>In this phase, virtual registers (which are unlimited in the IR and DAG forms) are mapped to actual physical registers of the target architecture. The allocator decides which values stay in registers and which are spilled to memory if there aren’t enough registers available.</p> <h4 id="reason-7"><a href="#reason-7" class="header-anchor">#</a> Reason</h4> <p>Physical registers are a limited resource, so register allocation is critical to ensure the efficient execution of the program on the target hardware.</p> <h4 id="key-source-files-3"><a href="#key-source-files-3" class="header-anchor">#</a> Key Source Files</h4> <p>llvm/lib/CodeGen/RegAlloc*</p> <h4 id="key-functions-classes-7"><a href="#key-functions-classes-7" class="header-anchor">#</a> Key Functions/Classes:</h4> <h5 id="registerallocator-a-generic-class-for-performing-register-allocation"><a href="#registerallocator-a-generic-class-for-performing-register-allocation" class="header-anchor">#</a> RegisterAllocator: A generic class for performing register allocation.</h5> <p><strong>Function</strong>: It allocates physical registers to virtual registers used in the MachineDAG. If not enough physical registers are available, it spills some of the values to memory.</p> <h5 id="linearscan-and-greedy-these-are-specific-register-allocation-algorithms-provided-by-llvm"><a href="#linearscan-and-greedy-these-are-specific-register-allocation-algorithms-provided-by-llvm" class="header-anchor">#</a> LinearScan and Greedy: These are specific register allocation algorithms provided by LLVM.</h5> <p><strong>Function</strong>: Greedy attempts to assign physical registers in a way that minimizes spills, while LinearScan allocates registers in a simpler but potentially less optimal way.</p> <h3 id="_9-from-machineinstruction-to-mcinst"><a href="#_9-from-machineinstruction-to-mcinst" class="header-anchor">#</a> 9. From MachineInstruction to MCinst</h3> <p>JIT: AsmPrinter::EmitInstruction<br>
Obj: ObjectStreamer::EmitInstruction<br></p> <h4 id="input-8"><a href="#input-8" class="header-anchor">#</a> Input</h4> <p>Machine Instructions with physical registers.</p> <h4 id="output-8"><a href="#output-8" class="header-anchor">#</a> Output</h4> <p>Assembly code.</p> <h4 id="tool-8"><a href="#tool-8" class="header-anchor">#</a> Tool</h4> <p>LLVM AsmPrinter.</p> <h4 id="transformation-8"><a href="#transformation-8" class="header-anchor">#</a> Transformation</h4> <p>Finally, the machine instructions are converted into assembly code, which is a human-readable form of the machine code. This step may also involve additional final optimizations (e.g., peephole optimizations).</p> <h4 id="reason-8"><a href="#reason-8" class="header-anchor">#</a> Reason</h4> <p>Assembly is a textual representation of machine code, which can then be assembled into binary instructions by the assembler.</p> <h4 id="key-source-file-5"><a href="#key-source-file-5" class="header-anchor">#</a> Key Source File</h4> <p>llvm/lib/CodeGen/AsmPrinter/</p> <h4 id="key-functions-classes-8"><a href="#key-functions-classes-8" class="header-anchor">#</a> Key Functions/Classes</h4> <h5 id="asmprinter-this-class-converts-machine-instructions-into-textual-assembly"><a href="#asmprinter-this-class-converts-machine-instructions-into-textual-assembly" class="header-anchor">#</a> AsmPrinter: This class converts machine instructions into textual assembly.</h5> <p><strong>Function</strong>: It traverses the list of machine instructions and prints the corresponding assembly syntax for the target architecture.</p> <h5 id="emitinstruction-this-method-in-asmprinter-prints-an-individual-machine-instruction"><a href="#emitinstruction-this-method-in-asmprinter-prints-an-individual-machine-instruction" class="header-anchor">#</a> EmitInstruction: This method in AsmPrinter prints an individual machine instruction.</h5> <p><strong>Function</strong>: It translates machine-specific instructions into their corresponding assembly code.</p> <h3 id="_10-build-llvm"><a href="#_10-build-llvm" class="header-anchor">#</a> 10. Build LLVM</h3> <p>create build&amp;cd build<br>
cmake -S llvm -B . -DCMAKE_BUILD_TYPE=Debug -DLLVM_TARGETS_TO_BUILD=&quot;MSP430;RISCV&quot; ../llvm<br>
make -j 8<br></p> <h4 id="how-to-build-lc3"><a href="#how-to-build-lc3" class="header-anchor">#</a> How to build LC3</h4> <p>cmake -S llvm -B . -DCMAKE_BUILD_TYPE=Debug  -DLLVM_EXPERIMENTAL_TARGETS_TO_BUILD=&quot;LC3&quot; ../llvm<br></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/hitqshao/qishao-notes/edit/main/docs/02.compiler/01.llvm_flow.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/09/30, 17:22:18</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/qishao-notes/pages/000002/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Getting Started with LLVM Core Libraries-Notes Chap5 IR</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/qishao-notes/pages/000002/">Getting Started with LLVM Core Libraries-Notes Chap5 IR</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/hitqshao" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:hitqshao@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/hitqshao" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2024
    <span>Eryajf | <a href="https://github.com/hitqshao/qishao-notes/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/qishao-notes/assets/js/app.4534a12d.js" defer></script><script src="/qishao-notes/assets/js/2.75973713.js" defer></script><script src="/qishao-notes/assets/js/22.b2a5c895.js" defer></script>
  </body>
</html>
