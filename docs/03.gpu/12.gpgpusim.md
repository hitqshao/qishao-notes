---
title: Understanding GPGPU-SIM & GPGPU-SIM UVM_SMART (1)
date: 2024-08-12
permalink: /pages/458725/
---

- libcuda
  * cuda_runtime_api.cc
- src
  * abstract_hardware_model.h/cpp
  * gpgpusim_entrypoint.h/cpp
  * stream_manager.h/cpp
  * cuda-sim
    - cuda-sim.h/cc
      ```
      void function_info::ptx_assemble() {
       for ( i=m_instructions.begin(); i != m_instructions.end(); i++ ) {
        g_pc_to_finfo[PC] = this;
        m_instr_mem[n] = pI;
        s_g_pc_to_insn.push_back(pI);
        ssert(pI == s_g_pc_to_insn[PC]);
        pI->set_m_instr_mem_index(n);
        pI->set_PC(PC);
       }
      }
      ```
    - memory.h/cc
    - opcode.h/def
    - ptx_loader.h/cc
    - ptx.y\
      It is a Yacc/Bison grammar file used to parse PTX (Parallel Thread Execution) assembly code, which is a low-level intermediate representation used by NVIDIA GPUs.\
      It defines the grammar rules for PTX assembly code and specifies how different components of PTX code should be interpreted and processed.\
      This includes recognizing various PTX instructions, operands, directives, and control structures, and translating them into an internal representation that the simulator can work with.
   
      When it meets instruction statement it will call add_instruction.
      ```
      statement_list: directive_statement { add_directive(); }
      | instruction_statement { add_instruction();
      ```
    - ptx_parser.h/cc
      the add_instruction used in ptx.y will call the following instruction.
      ```
      void add_instruction() 
      {
      ptx_instruction *i = new ptx_instruction(**);
      g_instructions.push_back(i);
      }
      ```
      in the end of function it will add all the instructins into function infomation
      ```
      void end_function()
      {
      ...
      g_func_info->add_inst( g_instructions );
      ...
      }
      ```
    - ptx_ir.h
      ```
      ...
      std::vector<const symbol*> m_args;
      // end_function will put function into this list
      std::list<ptx_instruction*> m_instructions;
      std::vector<basic_block_t*> m_basic_blocks;
      ```
    - ptx_sim.h/cc
  * gpgpu-sim
    - gpgpu-sim.h/cc
    - shader.h/shader.cc
    - mem_fetch.h/cc
    - stack.h/cc
    - addrdec.h/cc
    - dram.h/cc
    - traffic_breakdown.h/cc
