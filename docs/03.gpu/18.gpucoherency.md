---
title: GPU Cache Coherency
date: 2024-08-21
permalink: /pages/45875/
---

1. [213] Cache Coherence for GPU Architectures

---

### 1. [213] Cache Coherence for GPU Architectures

#### Another Design in CPU LLC
Library Cache Coherence (LCC), that implements sequential consistency on CMPs by stalling writes to cache blocks until they have been self-invalidated by all sharers.

Library Cache Coherence (LCC) [34, 54] is a time-based hardware coherence proposal that stores timestamps in a directory structure and delays stores to unexpired blocks to enforce sequential consistency on CMPs.\
The TC-Strong implementation of the TC framework is similar to LCC as both enforce write atomicity by stalling writes at the shared last level cache.

![image](https://github.com/user-attachments/assets/3e7e13cc-7d64-4234-897b-03754489dd1f)

#### Background
![image](https://github.com/user-attachments/assets/2e62c5ed-574b-4cc2-9f85-8b269dc80358)

We propose TC-Weak and a novel time-based memory fence mechanism to eliminate all write-stalling, improve performance, and reduce interconnect traffic compared to TC-Strong.
-  We find that the stalling of writes in TC-Strong causes poor performance on a GPU.
-  We also show that unlike for CPU applications [34, 54], the fixed timestamp prediction proposed by LCC is not suited for GPU applications.

#### GPU Memory System
Both thread-private and global memory are stored in off-chip GDDR DRAM and cached in the multi-level cache hierarchy, however only **global memory requires coherence**.

Memory accesses to the same cache block from different threads within a wavefront are merged into a single wide access by the Coalescing Unit.\
A memory instruction generates one memory access for every unique cache line accessed by the wavefront.\
All requests are handled in FIFO order by the in-order memory stage of a GPU core.\
**Writes to the same word by multiple scalar threads in a single wavefront do not have a defined behaviour [46]; only one write will succeed**.


